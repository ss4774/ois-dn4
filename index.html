
<!DOCTYPE html>
<html>
	<head>
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	    <title>EhrScape - Vnos in poizvedovanje po EHR podatkih</title>
	    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
	    
	    <link href="css/font-awesome.css" rel="stylesheet">
	    <link href="css/morris.css" rel="stylesheet">
	    <link href="css/style.css" rel="stylesheet">
	    
	    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
	    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	    <script src="demo.js"></script>
	    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	    <style>
	  		body {padding: 10px;}
	  		.btn {margin-top: 10px;}
	  		.obvestilo {margin-left:10px;}
	  	</style>
	</head>
	<body>
		<div class="page-header"><h2>Vnos in poizvedovanje po EHR podatkih <small>EhrScape platforma</small></h2></div>
		<div class="row">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-lg-8 col-md-8 col-sm-8"><b>Kreiraj EHR zapis</b> za novega bolnika</div>
							<div class="col-lg-4 col-md-4 col-sm-4"><select class="form-control input-sm" id="preberiPredlogoBolnika"><option value=""></option><option value="Pujsa,Pepa,1938-10-30T14:58">Pujsa Pepa</option></select></div>
						</div>
					</div>
					<div class="panel-body">
						<span class="label label-default">Ime</span><input id="kreirajIme" type="text" class="form-control input-mini" placeholder="Osama">
						<span class="label label-default">Priimek</span><input id="kreirajPriimek" type="text" class="form-control" placeholder="Bin Laden">
						<span class="label label-default">Datum rojstva</span><input id="kreirajDatumRojstva" type="text" class="form-control" placeholder="1957-03-10T09:08">
						<button type="button" class="btn btn-primary btn-xs" onclick="kreirajEHRzaBolnika()">Dodaj osnovne podatke o bolniku</button><span id="kreirajSporocilo"></span>
				  	</div>
				</div>
			</div>
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-lg-8 col-md-8 col-sm-8"><b>Preberi EHR zapis</b> obstoječega bolnika</div>
							<div class="col-lg-4 col-md-4 col-sm-4"><select class="form-control input-sm" id="preberiObstojeciEHR"><option value=""></option><option value="254f791d-2e7c-49d9-b646-376f62d6ead5">Dejan Lavbič</option><option value="d564c6a3-5a43-4fcc-bfa7-9ac76e9673bd">Pujsa Pepa</option><option value="b931580f-2b05-488b-985b-8d9ffb08ad02">Ata Smrk</option></select></div>
						</div>
					</div>
					<div class="panel-body">
						<span class="label label-default">EHR ID</span><input id="preberiEHRid" type="text" class="form-control input-mini" placeholder="7b661e12-3a98-21ad-c29e-2dc9f5a3d885">
						<button type="button" class="btn btn-primary btn-xs" onclick="preberiEHRodBolnika()">Preberi osnovne podatke o bolniku</button><span id="preberiSporocilo"></span>
				  	</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-lg-8 col-md-8 col-sm-8"><b>Vnos</b> meritve <b>vitalnih znakov</b> bolnika</div>
							<div class="col-lg-4 col-md-4 col-sm-4"><select class="form-control input-sm" id="preberiObstojeciVitalniZnak"><option value=""></option><option value="b931580f-2b05-488b-985b-8d9ffb08ad02|2014-11-21T11:40Z|185|80.0|36.50|118|92|98|medicinska sestra Smrketa">Ata Smrk</option></select></div>
						</div>
					</div>				
					<div class="panel-body">
						<span class="label label-default">EHR ID</span><input id="dodajVitalnoEHR" type="text" class="form-control input-mini" placeholder="7b661e12-3a98-21ad-c29e-2dc9f5a3d885">
						<span class="label label-default">Datum in ura</span><input id="dodajVitalnoDatumInUra" type="text" class="form-control input-mini" placeholder="2014-11-21T11:40Z">
						<span class="label label-default">Telesna višina</span><div class="input-group"><input id="dodajVitalnoTelesnaVisina" type="text" class="form-control input-mini" placeholder="185"><span class="input-group-addon">cm</span></div>
						<span class="label label-default">Telesna teža</span><div class="input-group"><input id="dodajVitalnoTelesnaTeza" type="text" class="form-control input-mini" placeholder="80.00"><span class="input-group-addon">kg</span></div>
						<span class="label label-default">Telesna temperatura</span><div class="input-group"><input id="dodajVitalnoTelesnaTemperatura" type="text" class="form-control input-mini" placeholder="36.50"><span class="input-group-addon">°C</span></div>
						<span class="label label-default">Sistolični krvni tlak</span><div class="input-group"><input id="dodajVitalnoKrvniTlakSistolicni" type="text" class="form-control input-mini" placeholder="118"><span class="input-group-addon">mm Hg</span></div>
						<span class="label label-default">Diastolični krvni tlak</span><div class="input-group"><input id="dodajVitalnoKrvniTlakDiastolicni" type="text" class="form-control input-mini" placeholder="92"><span class="input-group-addon">mm Hg</span></div>
						<span class="label label-default">Nasičenost krvi s kisikom</span><div class="input-group"><input id="dodajVitalnoNasicenostKrviSKisikom" type="text" class="form-control input-mini" placeholder="98"><span class="input-group-addon">%</span></div>
						<span class="label label-default">Merilec</span><input id="dodajVitalnoMerilec" type="text" class="form-control input-mini" placeholder="medicinska sestra Hrastova Micka">
						<button type="button" class="btn btn-primary btn-xs" onclick="dodajMeritveVitalnihZnakov()">Dodaj meritve vitalnih znakov</button><span id="dodajMeritveVitalnihZnakovSporocilo"></span>
				  	</div>
				</div>
			</div>	
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-lg-6 col-md-6 col-sm-6"><b>Pregled</b> meritev <b>vitalnih znakov</b> bolnika</div>
							<div class="col-lg-3 col-md-3 col-sm-3"><select class="form-control input-sm" id="preberiTipZaVitalneZnake"><option value="telesna temperatura">telesna temperatura</option><option value="telesna temperatura AQL">telesna temperatura (filter na podhladitev)</option><option value="telesna teža">telesna teža</option></select></div>
							<div class="col-lg-3 col-md-3 col-sm-3"><select class="form-control input-sm" id="preberiEhrIdZaVitalneZnake"><option value=""></option><option value="b931580f-2b05-488b-985b-8d9ffb08ad02">Ata Smrk</option><option value="d564c6a3-5a43-4fcc-bfa7-9ac76e9673bd">Pujsa Pepa</option></select></div>
						</div>
					</div>				
					<div class="panel-body">
						<span class="label label-default">EHR ID</span><input id="meritveVitalnihZnakovEHRid" type="text" class="form-control input-mini" placeholder="7b661e12-3a98-21ad-c29e-2dc9f5a3d885">
						<button type="button" class="btn btn-primary btn-xs" onclick="preberiMeritveVitalnihZnakov('telesna temperatura')">Preberi meritve vitalnih znakov</button><span id="preberiMeritveVitalnihZnakovSporocilo"></span>
						<div id="rezultatMeritveVitalnihZnakov"></div>
				  	</div>
				</div>			
			</div>
		</div>
		
		<div class="well demographics" style="position: relative">
            <div class="row">
                <div class="col-md-3">
                    
                    <div class="panel-heading">
    					<div class="row">
    						<div class="col-lg-8 col-md-8 col-sm-8"><b>Generiraj EHR zapis</b> bolnika</div>
    						<!--<div class="col-lg-4 col-md-4 col-sm-4"><select class="form-control input-sm" id="preberiObstojeciEHREHR"><option value=""></option><option value="254f791d-2e7c-49d9-b646-376f62d6ead5">Dejan Lavbič</option><option value="d564c6a3-5a43-4fcc-bfa7-9ac76e9673bd">Pujsa Pepa</option><option value="b931580f-2b05-488b-985b-8d9ffb08ad02">Ata Smrk</option></select></div>-->
    						<div class="col-lg-4 col-md-4 col-sm-4"><select class="form-control input-sm" id="generirajEHR"  onChange="generirajBolnika()"><option value=""></option><option value="Bolnik 1">Bolnik 1</option><option value="Bolnik 2">Bolnik 2</option><option value="Bolnik 3">Bolnik 3</option></select></div>
    					</div>
    				</div>
    				<div class="panel-body">
    					<span class="label label-default">EHR ID</span><input id="preberiEHRidEHR" type="text" class="form-control input-mini" placeholder="7b661e12-3a98-21ad-c29e-2dc9f5a3d885">
    					<button type="button" class="btn btn-primary btn-xs" onclick="preberiEHRodBolnikaEHR()">Preberi osnovne podatke o bolniku</button><span id="preberiSporociloEHR"></span>
    			  	</div>
                    
                    <div class="patient-pic" style="background-image: url('img/Body.jpeg');" alt="Patient"></div>
                </div>
                <div class="col-md-3">
                    <div class="patient-info">
                        <h4 id="patient-name"></h4>
                        <p>Age: <span class="patient-age"></span></p>
                        <!--<p>Gender: <span id="patient-gender"></span></p>-->
                        <p>DOB: <span id="patient-dob"></span></p>
                        <!--<p>Address: <span> - </span></p>-->
                        <p>Height: <span id="patient-height"></span></p>
                        <p>Weight: <span class="patient-weight"></span><span class="patient-weight1"></span></p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="patient-info">
                        <h4 id="patient-problems-info"></h4>
                        <p>Problems: </p>
                        <span id="patient-problems"></span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="ver-spacer left">
                        <div class="mask"></div>
                    </div>
                    <div class="patient-team">
                        <p>Detail:</p>
                        <div id="detail"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="patient-stats well" style="position: relative">
            <div class="row">
                <div class="col-md-8 bordered">
                    <div class="row" style="min-height: 57px;">
                        <div class="col-md-4 bordered centered" style="min-height: 67px;">
                            <p>Age:</p>
                            <div class="patient-age"></div>
                        </div>
                        <div class="col-md-4 bordered centered" style="min-height: 67px;">
                            <p>Weight:</p>
                            <div class="patient-weight">
                                <span class="weight-placeholder-value"></span> <span class="weight-placeholder-unit"></span>
                            </div>
                        </div>
                        <div class="col-md-4 centered">
                            <p>BMI:</p>
                            <div id="patient-bmi"></div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-4">
                                        <p>Blood Pressure:</p>
                                        <div id="patient-bp"></div>
                                </div>
                                <div class="col-md-4 centered">
                                    <div class="progress">
                                    	<div id="progress-bp-systolic">
                                        <!--<div class="progress-bar" style="width: 40%;"></div>-->
                                        </div>
                                    </div>
                                    <p>(Systolic)</p>
                                </div>
                                <div class="col-md-4 centered">
                                    <div class="progress">
                                    	<div id="progress-bp-diastolic">
                                        <!--<div class="progress-bar" style="width: 50%;"></div>-->
                                        </div>
                                    </div>
                                    <p>(Diastolic)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-4">
                                        <p>Pulse:</p>
                                        <div id="patient-pulse"></div>
                                </div>
                                <div class="col-md-8">
                                    <div class="progress">
                                    	<div id="progress-pulse">
                                        <!--<div class="progress-bar progress-bar-success bar-spo2"></div>-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row" style="min-height: 57px;">
                        <div class="col-md-4 bordered centered" style="min-height: 67px;">
                            <p>Body Temperature:</p>
                            <div id="patient-temp"></div>
                        </div>
                        <div class="col-md-4 bordered centered" style="min-height: 67px;">
                            <p>X:</p>
                            <div class="value">
                                <span class="weight-placeholder-value"></span> <span class="weight-placeholder-unit"></span>
                                <script>

                                var margin = {top: 20, right: 20, bottom: 30, left: 40},
                                    width = 960 - margin.left - margin.right,
                                    height = 500 - margin.top - margin.bottom;
                                
                                var x0 = d3.scale.ordinal()
                                    .rangeRoundBands([0, width], .1);
                                
                                var x1 = d3.scale.ordinal();
                                
                                var y = d3.scale.linear()
                                    .range([height, 0]);
                                
                                var color = d3.scale.ordinal()
                                    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);
                                
                                var xAxis = d3.svg.axis()
                                    .scale(x0)
                                    .orient("bottom");
                                
                                var yAxis = d3.svg.axis()
                                    .scale(y)
                                    .orient("left")
                                    .tickFormat(d3.format(".2s"));
                                
                                var svg = d3.select("body").append("svg")
                                    .attr("width", width + margin.left + margin.right)
                                    .attr("height", height + margin.top + margin.bottom)
                                  .append("g")
                                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                                
                                d3.csv("data.csv", function(error, data) {
                                  var ageNames = d3.keys(data[0]).filter(function(key) { return key !== "State"; });
                                
                                  data.forEach(function(d) {
                                    d.ages = ageNames.map(function(name) { return {name: name, value: +d[name]}; });
                                  });
                                
                                  x0.domain(data.map(function(d) { return d.State; }));
                                  x1.domain(ageNames).rangeRoundBands([0, x0.rangeBand()]);
                                  y.domain([0, d3.max(data, function(d) { return d3.max(d.ages, function(d) { return d.value; }); })]);
                                
                                  svg.append("g")
                                      .attr("class", "x axis")
                                      .attr("transform", "translate(0," + height + ")")
                                      .call(xAxis);
                                
                                  svg.append("g")
                                      .attr("class", "y axis")
                                      .call(yAxis)
                                    .append("text")
                                      .attr("transform", "rotate(-90)")
                                      .attr("y", 6)
                                      .attr("dy", ".71em")
                                      .style("text-anchor", "end")
                                      .text("Population");
                                
                                  var state = svg.selectAll(".state")
                                      .data(data)
                                    .enter().append("g")
                                      .attr("class", "g")
                                      .attr("transform", function(d) { return "translate(" + x0(d.State) + ",0)"; });
                                
                                  state.selectAll("rect")
                                      .data(function(d) { return d.ages; })
                                    .enter().append("rect")
                                      .attr("width", x1.rangeBand())
                                      .attr("x", function(d) { return x1(d.name); })
                                      .attr("y", function(d) { return y(d.value); })
                                      .attr("height", function(d) { return height - y(d.value); })
                                      .style("fill", function(d) { return color(d.name); });
                                
                                  var legend = svg.selectAll(".legend")
                                      .data(ageNames.slice().reverse())
                                    .enter().append("g")
                                      .attr("class", "legend")
                                      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });
                                
                                  legend.append("rect")
                                      .attr("x", width - 18)
                                      .attr("width", 18)
                                      .attr("height", 18)
                                      .style("fill", color);
                                
                                  legend.append("text")
                                      .attr("x", width - 24)
                                      .attr("y", 9)
                                      .attr("dy", ".35em")
                                      .style("text-anchor", "end")
                                      .text(function(d) { return d; });
                                
                                });
                                
                                </script>
                            </div>
                        </div>
                        <div class="col-md-4 centered">
                            <p>X:</p>
                            <div class="value patient-bmi"></div>
                        </div>
                    </div>
                    
                </div>
                <div class="col-md-4">
                    <img class="patient-height-image" src="img/body-placeholder.png" alt="Body">
                    <div class="patient-height-stats">
                        <p>Height:</p>
                        <div class="value">
                            <span class="height-placeholder-value"></span> <span class="height-placeholder-unit"></span>
                        </div>
                    </div>
                    <div id="patient-height-projection">
                        
                    </div>
                </div>
            </div>
        </div>
            
	</body>
</html>